# LOSOè®­ç»ƒç›‘æ§æŒ‡å—

## å®æ—¶ç›‘æ§è„šæœ¬

### å¿«é€Ÿå¼€å§‹

```bash
# å¯åŠ¨å®æ—¶ç›‘æ§ï¼ˆæ¯5ç§’åˆ·æ–°ï¼‰
python3 scripts/monitor_loso_realtime.py
```

### ç›‘æ§å†…å®¹

ç›‘æ§è„šæœ¬ä¼šæ˜¾ç¤ºä»¥ä¸‹ä¿¡æ¯ï¼š

1. **è®­ç»ƒè¿›ç¨‹çŠ¶æ€**
   - è¿›ç¨‹æ˜¯å¦è¿è¡Œ
   - è¿›ç¨‹ID
   - CPUä½¿ç”¨ç‡
   - å†…å­˜ä½¿ç”¨ç‡
   - è¿è¡Œæ—¶é•¿

2. **è®­ç»ƒè¿›åº¦**
   - å·²å®Œæˆç«™ç‚¹æ•°/æ€»ç«™ç‚¹æ•°
   - è¿›åº¦ç™¾åˆ†æ¯”
   - å¯è§†åŒ–è¿›åº¦æ¡
   - é¢„è®¡å‰©ä½™æ—¶é—´
   - å·²å®Œæˆç«™ç‚¹åˆ—è¡¨

3. **å·²ä¿å­˜çš„æ¨¡å‹**
   - æ¨¡å‹æ–‡ä»¶æ•°é‡ï¼ˆå½“å‰/ç›®æ ‡ï¼‰
   - ç«™ç‚¹ç›®å½•æ•°é‡
   - ç›®å½•å¤§å°
   - æ¨¡å‹ä¿å­˜é€Ÿç‡

4. **æœ€è¿‘çš„æ—¥å¿—è¾“å‡º**
   - æœ€å10è¡Œæ—¥å¿—ï¼ˆè‡ªåŠ¨è¿‡æ»¤è­¦å‘Šä¿¡æ¯ï¼‰

### ä½¿ç”¨æ–¹å¼

#### æ–¹å¼1: å‰å°è¿è¡Œï¼ˆæ¨èï¼‰

```bash
python3 scripts/monitor_loso_realtime.py
```

- å®æ—¶æ˜¾ç¤ºç›‘æ§ä¿¡æ¯
- æ¯5ç§’è‡ªåŠ¨åˆ·æ–°
- æŒ‰ `Ctrl+C` é€€å‡º

#### æ–¹å¼2: åå°è¿è¡Œ

```bash
# åå°è¿è¡Œå¹¶ä¿å­˜æ—¥å¿—
nohup python3 scripts/monitor_loso_realtime.py > monitor.log 2>&1 &

# æŸ¥çœ‹ç›‘æ§æ—¥å¿—
tail -f monitor.log
```

#### æ–¹å¼3: åœ¨å¦ä¸€ä¸ªç»ˆç«¯æŸ¥çœ‹

```bash
# ç»ˆç«¯1: è¿è¡Œè®­ç»ƒ
python3 scripts/train/train_frost_forecast.py --loso --save-loso-models ...

# ç»ˆç«¯2: è¿è¡Œç›‘æ§
python3 scripts/monitor_loso_realtime.py
```

### é…ç½®é€‰é¡¹

å¯ä»¥åœ¨è„šæœ¬ä¸­ä¿®æ”¹ä»¥ä¸‹é…ç½®ï¼ˆ`scripts/monitor_loso_realtime.py`ï¼‰ï¼š

```python
REFRESH_INTERVAL = 5  # åˆ·æ–°é—´éš”ï¼ˆç§’ï¼‰
MAX_LOG_LINES = 10    # æ˜¾ç¤ºçš„æ—¥å¿—è¡Œæ•°
```

### å…¶ä»–ç›‘æ§å‘½ä»¤

#### ç®€å•ç›‘æ§è„šæœ¬

```bash
# ä½¿ç”¨bashè„šæœ¬ï¼ˆä¸€æ¬¡æ€§æ£€æŸ¥ï¼‰
bash scripts/monitor_loso_training.sh
```

#### æ‰‹åŠ¨æ£€æŸ¥å‘½ä»¤

```bash
# æ£€æŸ¥è®­ç»ƒè¿›ç¨‹
ps aux | grep train_frost_forecast.py | grep loso

# æ£€æŸ¥è®­ç»ƒè¿›åº¦
cat experiments/lightgbm/top175_features/loso/checkpoint.json | python3 -m json.tool

# æ£€æŸ¥å·²ä¿å­˜çš„æ¨¡å‹æ•°é‡
find experiments/lightgbm/top175_features/loso -name 'model.pkl' | wc -l

# æŸ¥çœ‹å®æ—¶æ—¥å¿—
tail -f loso_training_with_models.log

# æ£€æŸ¥ç›®å½•å¤§å°
du -sh experiments/lightgbm/top175_features/loso
```

### ç›‘æ§è¾“å‡ºç¤ºä¾‹

```
================================================================================
ğŸ“Š LOSOè®­ç»ƒå®æ—¶ç›‘æ§ (æ¯5ç§’åˆ·æ–°) | 2025-11-13 18:55:30 | è¿è¡Œæ—¶é—´: 0s
================================================================================

ğŸ”„ è®­ç»ƒè¿›ç¨‹çŠ¶æ€:
  âœ… æ­£åœ¨è¿è¡Œ
  è¿›ç¨‹ID: 1035703
  CPUä½¿ç”¨: 193.0%
  å†…å­˜ä½¿ç”¨: 35.8%
  è¿è¡Œæ—¶é•¿: 17:18

ğŸ“‹ è®­ç»ƒè¿›åº¦:
  å·²å®Œæˆ: 14/18 ç«™ç‚¹ (77.8%)
  å·²å®Œæˆç«™ç‚¹: [2, 7, 15, 39, 47, 70, 71, 80, 105, 124, 125, 131, 146, 182]
  [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘] 77.8%
  é¢„è®¡å‰©ä½™æ—¶é—´: 4m 32s

ğŸ’¾ å·²ä¿å­˜çš„æ¨¡å‹:
  æ¨¡å‹æ–‡ä»¶: 112/144 (ç›®æ ‡: 18ç«™ç‚¹ Ã— 4æ—¶é—´çª—å£ Ã— 2æ¨¡å‹)
  ç«™ç‚¹ç›®å½•: 14/18
  ç›®å½•å¤§å°: 21M
  ä¿å­˜é€Ÿç‡: 0.12 æ¨¡å‹/ç§’
  âœ¨ æ–°å¢ 8 ä¸ªæ¨¡å‹

ğŸ“„ æœ€è¿‘çš„æ—¥å¿—è¾“å‡º:
--------------------------------------------------------------------------------
  Loading data for station 194...
  Memory usage: 4.02 GB
  Train samples: 2235840, Test samples: 131520
  Processing 3h horizon...
  Applying feature selection...
  After selecting by importance: 175 features
  âœ… Brier=0.0036, ECE=0.0013, ROC-AUC=0.9964, MAE=1.2940Â°C
  ğŸ’¾ Saved models to experiments/.../station_194/horizon_3h
--------------------------------------------------------------------------------

================================================================================
æŒ‰ Ctrl+C é€€å‡ºç›‘æ§ | ä¸‹æ¬¡åˆ·æ–°: 5ç§’
================================================================================
```

### æ•…éšœæ’é™¤

#### ç›‘æ§è„šæœ¬æ— æ³•è¿è¡Œ

```bash
# æ£€æŸ¥Pythonç‰ˆæœ¬
python3 --version

# æ£€æŸ¥è„šæœ¬æƒé™
chmod +x scripts/monitor_loso_realtime.py

# ç›´æ¥è¿è¡ŒæŸ¥çœ‹é”™è¯¯
python3 scripts/monitor_loso_realtime.py
```

#### æ— æ³•æ£€æµ‹åˆ°è®­ç»ƒè¿›ç¨‹

- ç¡®ä¿è®­ç»ƒè¿›ç¨‹æ­£åœ¨è¿è¡Œï¼š`ps aux | grep train_frost_forecast`
- æ£€æŸ¥è¿›ç¨‹åç§°æ˜¯å¦åŒ¹é…è„šæœ¬ä¸­çš„æœç´¢æ¨¡å¼

#### æ£€æŸ¥ç‚¹æ–‡ä»¶ä¸å­˜åœ¨

- è¿™æ˜¯æ­£å¸¸çš„ï¼Œå¦‚æœè®­ç»ƒåˆšåˆšå¼€å§‹
- ç­‰å¾…ç¬¬ä¸€ä¸ªç«™ç‚¹å®Œæˆåï¼Œæ£€æŸ¥ç‚¹æ–‡ä»¶ä¼šè¢«åˆ›å»º

### æ€§èƒ½è¯´æ˜

- ç›‘æ§è„šæœ¬æœ¬èº«èµ„æºæ¶ˆè€—å¾ˆå°ï¼ˆ<1% CPUï¼Œ<50MBå†…å­˜ï¼‰
- æ¯5ç§’åˆ·æ–°ä¸€æ¬¡ï¼Œä¸ä¼šå½±å“è®­ç»ƒæ€§èƒ½
- å¯ä»¥é•¿æ—¶é—´è¿è¡Œï¼Œæ— éœ€æ‹…å¿ƒèµ„æºæ¶ˆè€—

